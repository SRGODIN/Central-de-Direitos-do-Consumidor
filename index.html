<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#28a745" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="description" content="Central de informa√ß√µes sobre direitos do consumidor e assist√™ncia jur√≠dica" />
  <meta name="format-detection" content="telephone=no" />
  <link rel="apple-touch-icon" href="icon.png" />
  <title>Central de Direitos do Consumidor</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-balance-scale"></i> Central de Direitos do Consumidor</h1>
      <div class="search-container">
        <i class="fas fa-search search-icon"></i>
        <input type="text" id="busca" placeholder="Digite uma d√∫vida..." autocomplete="off" />
      </div>
    </header>

    <!-- Menu de navega√ß√£o r√°pida para mobile -->
    <nav class="mobile-nav">
      <a href="#conteudo" class="nav-item active"><i class="fas fa-search"></i><span>Buscar</span></a>
      <a href="#emergencia" class="nav-item"><i class="fas fa-exclamation-triangle"></i><span>Emerg√™ncia</span></a>
      <a href="#servicos" class="nav-item"><i class="fas fa-map-marker-alt"></i><span>Servi√ßos</span></a>
      <a href="#modelos" class="nav-item"><i class="fas fa-file-alt"></i><span>Modelos</span></a>
    </nav>

    <main id="conteudo">
      <!-- Respostas aparecem aqui -->
      <div class="intro-message">
        <i class="fas fa-info-circle"></i>
        <p>Digite uma d√∫vida acima para encontrar informa√ß√µes sobre seus direitos como consumidor.</p>
      </div>
    </main>

    <section id="emergencia" class="emergencia-section"> 
      <h2><i class="fas fa-exclamation-triangle"></i> Estou em apuros</h2> 
      <select id="apoioEmergencia" class="select-styled"> 
        <option value="">Selecione uma situa√ß√£o</option> 
        <option value="demissao">Fui demitido sem receber meus direitos</option> 
        <option value="ameaca">Estou sendo amea√ßado</option> 
        <option value="luzCortada">Minha luz foi cortada</option> 
        <option value="violencia">Sofro viol√™ncia dom√©stica</option> 
        <option value="semRenda">Estou sem renda e preciso de ajuda</option> 
      </select> 
      <button onclick="mostrarAjuda()" class="btn-primary"><i class="fas fa-hands-helping"></i> Ver orienta√ß√£o</button> 
      <div id="resultadoAjuda" class="resultado-card"></div> 
    </section>

    <section id="servicos" class="servicos-section"> 
      <h2><i class="fas fa-map-marker-alt"></i> Encontre ajuda perto de voc√™</h2> 
      <div class="form-group">
        <input type="text" id="cepBusca" placeholder="Digite seu CEP" maxlength="9" class="input-styled"> 
        <button onclick="buscarServicos()" class="btn-secondary"><i class="fas fa-search"></i> Buscar</button>
      </div>
      <div id="resultadoServicos" class="resultado-container">
        <ul id="listaServicos" class="lista-servicos"></ul>
      </div>
    </section>

    <footer id="modelos"> 
      <h2><i class="fas fa-file-alt"></i> Gerar Modelo de Reclama√ß√£o</h2>
      <div class="form-group">
        <label for="tipoReclamacao">Selecione o tipo de reclama√ß√£o:</label> 
        <select id="tipoReclamacao" class="select-styled"> 
          <option value="defeito">Produto com defeito</option> 
          <option value="atrasoEntrega">Atraso na entrega</option> 
          <option value="reembolso">Reembolso por arrependimento</option> 
          <option value="cobrancaIndevida">Cobran√ßa indevida</option> 
          <option value="cancelamentoServico">Cobran√ßa ap√≥s cancelamento</option> 
          <option value="vendaCasada">Venda casada</option> 
        </select> 
      </div>
      <button onclick="gerarModelo()" class="btn-primary"><i class="fas fa-file-download"></i> Gerar modelo</button> 
      
      <div class="actions-container">
        <button id="copyButton" onclick="copiarModelo()" class="btn-action"><i class="fas fa-copy"></i> Copiar</button>
        <button id="shareButton" onclick="compartilharModelo()" class="btn-action"><i class="fas fa-share-alt"></i> Compartilhar</button>
      </div>
   
      <div id="modeloGerado" class="modelo-card"></div> 
    </footer>
  </div>

  <script src="dados.js"></script>
  <script src="script.js"></script>
  <script>
    // Fun√ß√£o para mostrar bot√µes de a√ß√£o quando um modelo for gerado
    function mostrarBotoesAcao() {
      document.getElementById('copyButton').style.display = 'inline-block';
      document.getElementById('shareButton').style.display = 'inline-block';
    }
    
    // Fun√ß√£o para copiar o modelo para a √°rea de transfer√™ncia
    function copiarModelo() {
      const texto = document.getElementById('modeloGerado').innerText;
      navigator.clipboard.writeText(texto)
        .then(() => {
          alert('Modelo copiado para a √°rea de transfer√™ncia!');
        })
        .catch(err => {
          console.error('Erro ao copiar texto: ', err);
        });
    }
    
    // Fun√ß√£o para compartilhar o modelo (Web Share API)
    function compartilharModelo() {
      const texto = document.getElementById('modeloGerado').innerText;
      
      if (navigator.share) {
        navigator.share({
          title: 'Modelo de Reclama√ß√£o',
          text: texto
        })
        .catch(err => {
          console.error('Erro ao compartilhar: ', err);
        });
      } else {
        alert('Seu navegador n√£o suporta compartilhamento. Copie o texto manualmente.');
      }
    }
    
    // Modificar a fun√ß√£o gerarModelo para mostrar os bot√µes de a√ß√£o
    const originalGerarModelo = window.gerarModelo;
    window.gerarModelo = function() {
      originalGerarModelo();
      mostrarBotoesAcao();
      
      // Adicionar bot√£o de ouvir ap√≥s gerar o modelo
      const modeloGerado = document.getElementById('modeloGerado');
      const botaoOuvir = document.createElement('button');
      botaoOuvir.innerHTML = 'üîä Ouvir';
      botaoOuvir.className = 'btn-audio';
      botaoOuvir.onclick = function() { lerTexto('modeloGerado'); };
      
      // Adicionar o bot√£o na div de a√ß√µes
      document.querySelector('.actions-container').appendChild(botaoOuvir);
    };
    
    // Fun√ß√£o para mostrar ajuda de emerg√™ncia
    function mostrarAjuda() {
      const situacao = document.getElementById('apoioEmergencia').value;
      const resultadoDiv = document.getElementById('resultadoAjuda');
      
      if (!situacao) {
        resultadoDiv.innerHTML = '<p><strong>Por favor, selecione uma situa√ß√£o para receber orienta√ß√£o.</strong></p>';
        resultadoDiv.style.display = 'block';
        return;
      }
      
      let mensagem = '';
      
      switch(situacao) {
        case 'demissao':
          mensagem = `<h3>Demiss√£o sem direitos</h3>
          <p>Se voc√™ foi demitido sem receber seus direitos trabalhistas, procure imediatamente:</p>
          <ul>
            <li>O sindicato da sua categoria</li>
            <li>A Defensoria P√∫blica do Trabalho</li>
            <li>O Minist√©rio P√∫blico do Trabalho (MPT)</li>
          </ul>
          <p>Ligue para o Disque 100 ou 158 (Minist√©rio do Trabalho) para denunciar e obter orienta√ß√µes.</p>`;
          break;
        case 'ameaca':
          mensagem = `<h3>Amea√ßas</h3>
          <p>Se voc√™ est√° sendo amea√ßado:</p>
          <ul>
            <li>Ligue para a Pol√≠cia Militar: <strong>190</strong></li>
            <li>Registre um Boletim de Ocorr√™ncia na delegacia mais pr√≥xima</li>
            <li>Em caso de amea√ßa online, procure a Delegacia de Crimes Cibern√©ticos</li>
          </ul>
          <p>Guarde provas como mensagens, e-mails ou grava√ß√µes.</p>`;
          break;
        case 'luzCortada':
          mensagem = `<h3>Corte de energia el√©trica</h3>
          <p>Se sua luz foi cortada:</p>
          <ul>
            <li>Verifique se houve aviso pr√©vio (obrigat√≥rio)</li>
            <li>Procure a ag√™ncia da concession√°ria de energia</li>
            <li>Registre reclama√ß√£o na ANEEL: 167 ou site da ag√™ncia</li>
            <li>Procure o PROCON local</li>
          </ul>
          <p>O corte √© proibido √†s sextas, s√°bados, domingos, feriados e v√©speras de feriado.</p>`;
          break;
        case 'violencia':
          mensagem = `<h3>Viol√™ncia dom√©stica</h3>
          <p>Se voc√™ sofre viol√™ncia dom√©stica, busque ajuda imediatamente:</p>
          <ul>
            <li>Ligue para a Central de Atendimento √† Mulher: <strong>180</strong></li>
            <li>Pol√≠cia Militar: <strong>190</strong></li>
            <li>Procure a Delegacia da Mulher mais pr√≥xima</li>
            <li>Centro de Refer√™ncia de Assist√™ncia Social (CRAS)</li>
          </ul>
          <p>Voc√™ tem direito a medidas protetivas e acolhimento.</p>`;
          break;
        case 'semRenda':
          mensagem = `<h3>Situa√ß√£o de vulnerabilidade econ√¥mica</h3>
          <p>Se voc√™ est√° sem renda e precisa de ajuda:</p>
          <ul>
            <li>Procure o Centro de Refer√™ncia de Assist√™ncia Social (CRAS) do seu munic√≠pio</li>
            <li>Verifique se voc√™ tem direito a benef√≠cios como Bolsa Fam√≠lia</li>
            <li>Busque informa√ß√µes sobre programas de aux√≠lio emergencial</li>
            <li>Procure a Defensoria P√∫blica para orienta√ß√£o sobre direitos sociais</li>
          </ul>
          <p>Ligue para o n√∫mero 121 (Minist√©rio da Cidadania) para informa√ß√µes sobre programas sociais.</p>`;
          break;
      }
      
      resultadoDiv.innerHTML = mensagem;
      resultadoDiv.style.display = 'block';
      
      // Adicionar bot√£o de ouvir ap√≥s exibir o resultado
      const botaoOuvir = document.createElement('button');
      botaoOuvir.innerHTML = 'üîä Ouvir';
      botaoOuvir.className = 'btn-audio';
      botaoOuvir.onclick = function() { lerTexto('resultadoAjuda'); };
      resultadoDiv.appendChild(botaoOuvir);
      
      resultadoDiv.scrollIntoView({ behavior: 'smooth' });
    }
    
    // Fun√ß√£o para buscar servi√ßos p√∫blicos por CEP
    function buscarServicos() {
      const cep = document.getElementById('cepBusca').value.replace(/\D/g, '');
      const resultadoDiv = document.getElementById('resultadoServicos');
      const listaServicos = document.getElementById('listaServicos');
      
      if (cep.length !== 8) {
        alert('Por favor, digite um CEP v√°lido');
        return;
      }
      
      // Simula√ß√£o de servi√ßos pr√≥ximos (em uma aplica√ß√£o real, isso viria de uma API)
      const servicos = {
        'defensoria': {
          nome: 'Defensoria P√∫blica',
          descricao: 'Assist√™ncia jur√≠dica gratuita para pessoas de baixa renda',
          icone: 'fas fa-balance-scale'
        },
        'procon': {
          nome: 'PROCON',
          descricao: '√ìrg√£o de prote√ß√£o e defesa do consumidor',
          icone: 'fas fa-shopping-cart'
        },
        'cras': {
          nome: 'CRAS',
          descricao: 'Centro de Refer√™ncia de Assist√™ncia Social',
          icone: 'fas fa-hands-helping'
        },
        'delegacia': {
          nome: 'Delegacia',
          descricao: 'Para registrar ocorr√™ncias e den√∫ncias',
          icone: 'fas fa-shield-alt'
        },
        'conselho-tutelar': {
          nome: 'Conselho Tutelar',
          descricao: 'Prote√ß√£o dos direitos de crian√ßas e adolescentes',
          icone: 'fas fa-child'
        }
      };
      
      // Limpar lista anterior
      listaServicos.innerHTML = '';
      
      // Adicionar servi√ßos √† lista
      Object.keys(servicos).forEach(key => {
        const servico = servicos[key];
        const endereco = `${servico.nome}, CEP ${cep.replace(/(\d{5})(\d{3})/, '$1-$2')}, Brasil`;
        const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(endereco)}`;
        
        const item = document.createElement('li');
        item.innerHTML = `
          <div class="servico-item">
            <div class="servico-icone"><i class="${servico.icone}"></i></div>
            <div class="servico-info">
              <h3>${servico.nome}</h3>
              <p>${servico.descricao}</p>
              <p class="servico-endereco">Endere√ßo pr√≥ximo ao CEP ${cep.replace(/(\d{5})(\d{3})/, '$1-$2')}</p>
              <a href="${mapsUrl}" class="servico-link" target="_blank"><i class="fas fa-map-marker-alt"></i> Ver no mapa</a>
            </div>
          </div>
        `;
        listaServicos.appendChild(item);
      });
      
      // Mostrar resultados
      resultadoDiv.style.display = 'block';
      resultadoDiv.scrollIntoView({ behavior: 'smooth' });
    }
    
    // Formatar CEP enquanto digita
    document.getElementById('cepBusca').addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length > 5) {
        value = value.replace(/^(\d{5})(\d{0,3}).*/, '$1-$2');
      }
      e.target.value = value;
    });
    
    // Fun√ß√£o para navega√ß√£o mobile
    document.querySelectorAll('.mobile-nav a').forEach(link => {
      link.addEventListener('click', function(e) {
        // Remover classe active de todos os links
        document.querySelectorAll('.mobile-nav a').forEach(item => {
          item.classList.remove('active');
        });
        
        // Adicionar classe active ao link clicado
        this.classList.add('active');
        
        // Scroll suave para a se√ß√£o
        const targetId = this.getAttribute('href');
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          e.preventDefault();
          window.scrollTo({
            top: targetElement.offsetTop - 60,
            behavior: 'smooth'
          });
        }
      });
    });
    
    // Detectar scroll para atualizar navega√ß√£o ativa
    window.addEventListener('scroll', function() {
      const scrollPosition = window.scrollY;
      
      // Obter posi√ß√µes das se√ß√µes
      const sections = [
        document.getElementById('conteudo'),
        document.getElementById('emergencia'),
        document.getElementById('servicos'),
        document.getElementById('modelos')
      ];
      
      // Encontrar a se√ß√£o vis√≠vel atual
      let currentSection = sections[0];
      sections.forEach(section => {
        if (section && scrollPosition >= section.offsetTop - 100) {
          currentSection = section;
        }
      });
      
      // Atualizar navega√ß√£o ativa
      document.querySelectorAll('.mobile-nav a').forEach(link => {
        const href = link.getAttribute('href');
        if (href === `#${currentSection.id}`) {
          link.classList.add('active');
        } else {
          link.classList.remove('active');
        }
      });
    });
    
    // Inicializar bot√µes de a√ß√£o como escondidos
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('copyButton').style.display = 'none';
      document.getElementById('shareButton').style.display = 'none';
      
      // Adicionar classe para anima√ß√£o de entrada
      setTimeout(() => {
        document.body.classList.add('loaded');
      }, 300);
    });
    
    // Fun√ß√£o para ler texto em voz alta
    function lerTexto(id) { 
      const texto = document.getElementById(id).innerText; 
      const utter = new SpeechSynthesisUtterance(texto); 
      utter.lang = "pt-BR"; 
      
      // Parar qualquer s√≠ntese de voz em andamento
      speechSynthesis.cancel();
      
      // Iniciar nova s√≠ntese
      speechSynthesis.speak(utter);
      
      // Feedback visual
      const botao = event.currentTarget;
      const textoOriginal = botao.innerHTML;
      botao.innerHTML = 'üîà Falando...';
      botao.disabled = true;
      
      // Restaurar bot√£o quando terminar de falar
      utter.onend = function() {
        botao.innerHTML = textoOriginal;
        botao.disabled = false;
      };
    }
  </script>
</body>
</html>
